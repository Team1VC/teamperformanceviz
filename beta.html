<!DOCTYPE>
<html>
	<head>
		<title>Beta</title>
		<script src="http://d3js.org/d3.v3.min.js"></script>
		<style type="text/css" src="styles.css"></style>
		<style>
			.domain{
				display:none;
			}
			text {
				font-family: 'Arial';
				color: #ffffff;
			}
		</style>
	</head>
	<body>

		<div id="container">
			<script type="text/javascript">

				var datos;
				var width = 940*4,
					height = 480;

				var canvas = d3.select("#container")
							.append("svg")
							.attr("width", width)
							.attr("height", height)
							.attr("style","background-image: url('assets/background-mountains.svg');");

				var imgs = canvas.append("g").append("svg:image")
							        .attr("xlink:href", "assets/background-sky.svg")
							        .attr("preserveAspectRatio", "none")
							        .attr("width", width)
							        .attr("height", height);


				d3.json("team-performance.json", function(data) {

					console.dir(data);

					var maxy = 1000000;

					var scale = d3.scale.linear()
							.domain([0,maxy])
							.range([height, 0]);

					var yAxis = d3.svg.axis()
									  .scale(scale)
									  .ticks(5)
									  .orient("right");
					var temp = 30;
					var offset = 0;
					var ticks = scale.ticks(10);
					canvas.selectAll("line").data(ticks).enter().append("g").append("line")
			        .attr(
			        {
			            "class":"horizontalGrid",
			            "x1" : 0,
			            "x2" : width,
			            "y1" : function(d){ return scale(d)+10;},
			            "y2" : function(d){ return scale(d)+10;},
			            "stroke" : "#6590A6",
			            "stroke-width" : "1.5px",
			            "stroke-opacity" : "0.2"
			        });
					function desplazamiento(x, i){

						var pollo = offset*.75;
						offset += scale(x);

						if (i == 0){
							return temp;
						}
						else {
							return (pollo);
						}
					}

					var objects = canvas.append("g").selectAll("image")
										.data(data.teamPerformance)
										.enter()
											.append("svg:image")
											.attr("xlink:href", "assets/mountain.svg")
											.attr("x", function (d, i) { return desplazamiento(d.finalTarget, i); })
											.attr("y", function (d,i) { return height-scale(d.finalTarget)*.80; })
											.attr("width", function (d) { return scale(d.finalTarget); })
											.attr("height", function (d) { return scale(d.finalTarget)*.80; });
											/*.append("g")
												.append("path")
										        .attr("class", "line")
										        .style("stroke-dasharray", ("3, 3"))  // <== This line here!!
										        .attr("d", 10)
												.append("path")
										        .attr("class", "line")
										        .style("stroke-dasharray", ("3, 3"))  
										        .attr("d", 10);*/

					canvas.append("g")
		 				.attr("class", "yaxis")
		 				.call(yAxis);

				console.dir(objects);

				})

			</script>
		</div>

	</head>
</html>